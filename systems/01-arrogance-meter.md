# 囂張值系統規格

## 基本資訊
- **優先級**：Must（核心驅動系統）
- **依賴系統**：章節管理
- **被依賴**：抽卡系統、忍/用系統、打臉演出、廣告系統

---

## 1. 設計目標

### 為什麼存在？
製造「壓力→爆發」的節奏感。玩家看著囂張值一直漲，會越來越想打臉。

### 設計目標
1. 讓玩家持續感受到緊張感
2. 驅動「忍 vs 用」的核心抉擇
3. 囂張值爆表 = 變現入口（看廣告重生）

### 非目標
- 不做複雜的多維度數值
- 不做隱藏的數值計算，玩家看到的就是全部

---

## 2. 核心機制

### 機制概述
每章有一條 0-100% 的囂張值條。壞人做壞事 → 囂張值升。玩家用卡打臉 → 囂張值降。100% = Game Over，0% = 章節勝利。

### 流程圖
```
章節開始（囂張值 = 20%）
  ↓
劇情推進 → 壞人使壞事件
  ↓
囂張值 +N%（依事件大小）
  ↓
├── < 100% → 繼續劇情
│     ↓
│   抽卡觸發 → 忍/用選擇
│     ↓
│   用卡 → 囂張值 -M% → 打臉演出
│   忍  → 繼續，囂張值繼續漲
│     ↓
│   囂張值 = 0% → 章節完成 ✅
│
└── = 100% → Game Over ❌
      ↓
    看廣告 → 重生到記錄點（囂張值回到上個記錄點的值）
    不看   → 回到章節選擇
```

### 規則列表
| 規則 | 描述 |
|------|------|
| 初始值 | 每章開始 20%（壞人一開始就有點囂張）|
| 上限 | 100%（爆表 = Game Over）|
| 下限 | 0%（歸零 = 章節勝利）|
| 增加觸發 | 劇情事件自動觸發 |
| 減少觸發 | 玩家用卡時觸發 |
| 記錄點 | 每次用卡成功後自動存記錄點 |

---

## 3. 數值設計

### 囂張值增加（壞人事件）— 遞增制 ✅ Sean confirmed
**前期章節 3-5 次事件，後期更多**
每次使壞值遞增（壓力越來越大）：

| 章節 | 事件次數 | 增加模式 |
|------|----------|----------|
| 序章 | 2-3 次 | +10%, +15% |
| Ch.1-2 | 4-5 次 | +10%, +12%, +15%, +18%, +20% |
| Ch.3-4 | 6-7 次 | +8%, +10%, +12%, +15%, +18%, +20%, +25% |
| Ch.5+ | 8-10 次 | 從 +8% 遞增到 +30% |

### 囂張值減少（用卡打臉）— 依稀有度 ✅ Sean confirmed
| 卡牌稀有度 | 基礎減少 | 忍耐 ×2 | 忍耐 ×3 |
|------------|----------|----------|----------|
| N（普通）  | -10%     | -15%     | -20%     |
| R（稀有）  | -15%     | -22%     | -30%     |
| SR（超稀有）| -25%    | -37%     | -50%     |
| SSR（傳說）| -40%     | -60%     | -80%     |

**忍耐倍率公式：** `實際減少 = 基礎減少 × (1 + 忍耐次數 × 0.5)`

### 每章事件節奏範例
```
Ch.1 範例（5 個事件，遞增制）：
事件1: +10% → 累計 30%
事件2: +12% → 累計 42%  ← 第 1 次抽卡
事件3: +15% → 累計 57%  ← 第 2 次抽卡
事件4: +18% → 累計 75%  ← 第 3 次抽卡（緊張！）
事件5: +20% → 累計 95%  ← 最後機會！

Ch.5 範例（8 個事件，更密集）：
事件1: +8%  → 累計 28%
事件2: +10% → 累計 38%  ← 第 1 次抽卡
事件3: +12% → 累計 50%
事件4: +15% → 累計 65%  ← 第 2 次抽卡
事件5: +18% → 累計 83%  ← 第 3 次抽卡
事件6: +20% → 如果沒處理就危險
事件7: +25% → ← 第 4 次抽卡
事件8: +30% → Boss 級最終一擊
```

### 平衡考量
- 玩家至少需要用 2-3 張卡才能清完一章
- SSR 一張幾乎清空 = 抽到 SSR 的巨大爽感
- 全忍到最後再用 = 風險極高但超爽

---

## 4. 資料結構

```json
ArroganceMeter {
  chapter_id: string,
  current_value: float,      // 0.0 - 1.0
  max_value: 1.0,
  checkpoint_value: float,   // 上個記錄點的值
  events_triggered: int,     // 已觸發幾個壞人事件
  total_events: int          // 本章總事件數
}
```

---

## 5. UI/UX 需求

### 畫面
- 遊戲頂部常駐顯示囂張值條
- 左側壞人圖示 + 右側百分比數字

### 回饋設計
| 事件 | 視覺 | 音效 |
|------|------|------|
| 囂張值 +（小）| 條平滑增長 | 輕微警示音 |
| 囂張值 +（大）| 條快速跳動 + 螢幕微震 | 重擊音 |
| 囂張值 >80% | 條變紅 + 持續脈動 | 心跳音 |
| 囂張值 -（打臉）| 條快速下降 + 綠色閃光 | 爽快碎裂音 |
| 100% Game Over | 全屏紅閃 + 裂屏效果 | 玻璃碎裂 |
| 0% 勝利 | 條消失 + 金色煙火 | 勝利號角 |

---

## 6. 與其他系統的接口

### 輸入
| 來源 | 接收 | 時機 |
|------|------|------|
| 章節管理 | 壞人事件 + 增加量 | 劇情推進到事件節點 |
| 忍/用系統 | 用卡減少量 | 玩家選「用」|
| 廣告系統 | 重置到記錄點 | 看完廣告 |

### 輸出
| 目標 | 提供 | 時機 |
|------|------|------|
| 抽卡系統 | 當前囂張值（影響抽卡值累積速度）| 每次囂張值變化 |
| 打臉演出 | 下降量（決定演出等級）| 用卡時 |
| 廣告系統 | Game Over 事件 | 囂張值 = 100% |

---

## 7. 迭代計畫

### MVP
- 單一囂張值條
- 固定增減數值
- Game Over + 記錄點回溯

### V1.1
- 囂張值接近爆表時的額外視覺壓力
- 不同章節不同初始值和節奏

### 未來
- 多個壞人分別有囂張值（複雜商戰）
- 隱藏囂張值（壞人假裝好人）
