# 廣告系統規格

## 基本資訊
- **優先級**：Should（主要變現）
- **依賴系統**：囂張值、抽卡、章節管理
- **被依賴**：無

---

## 1. 設計目標

1. 玩家主動選擇看廣告（不強制）
2. 每個觸發點都讓玩家覺得「值得看」
3. 不打斷遊戲節奏

---

## 2. 五個廣告觸發點

| # | 觸發點 | 時機 | 獎勵 | 玩家動機 |
|---|--------|------|------|----------|
| 1 | 🔄 重生 | Game Over（囂張值爆表）| 回到記錄點繼續 | 不想重頭來 |
| 2 | ⏪ 回溯 | 選錯忍/用後悔 | 撤回上一步選擇 | 修正錯誤 |
| 3 | ⚡ 加速累積 | 抽卡前 | 下次抽卡機率 SR+ 提升 | 想抽好卡 |
| 4 | 🔍 解鎖線索 | 劇情關鍵點 | 顯示壞人弱點提示 | 好奇心 |
| 5 | 🎁 每日禮包 | 每日首次登入 | 免費抽卡 ×1 + 貨幣 | 養成習慣 |

### 限制
- 每個觸發點每天最多看 3 次
- 同一場景不會連續出現兩次廣告提示
- 廣告提示可以直接關閉（不看也能繼續）

---

## 3. 資料結構

```json
AdState {
  daily_watches: {
    resurrect: int,     // 今日重生次數
    rewind: int,        // 今日回溯次數
    boost: int,         // 今日加速次數
    hint: int,          // 今日線索次數
    daily_gift: bool    // 今日禮包是否領取
  },
  total_watches: int,
  last_reset_date: string
}
```

---

## 4. UI 設計

### 廣告提示 UI（統一風格）
```
┌────────────────────┐
│  🔄 重生機會！      │
│                    │
│  觀看廣告即可      │
│  回到上個記錄點    │
│                    │
│  [📺 觀看] [✕ 放棄] │
│                    │
│  今日剩餘：2/3 次  │
└────────────────────┘
```

---

## 5. 技術整合

- Godot 廣告 SDK：AdMob（Google）
- Rewarded Video Ads
- 測試階段用 mock ads（假廣告跳過）

---

## 6. 迭代計畫

### MVP
- 5 個觸發點
- Mock 廣告（直接跳過給獎勵）
- 每日次數限制

### V1.1
- 接入 AdMob 真實廣告
- 廣告觀看統計
- 去廣告 IAP

### 未來
- 插頁廣告（章節結算時）
- 廣告獎勵翻倍活動
